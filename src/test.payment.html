<!DOCTYPE html>
<html>
<head>
  <title>Test Razorpay</title>
  <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
</head>
<body>
  <button onclick="pay()">Pay</button>

  <script>
  
    async function pay() {
  const res = await fetch("http://localhost:5000/api/v1/payments/createOrder", {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
      "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2OTk2YWMxYzdmOWQ4MTM3YTQwNTIyOGUiLCJlbWFpbCI6InN0ZXZlZ29hdEA0OSIsInVzZXJOYW1lIjoic3RldmVzbWl0aCIsImZ1bGxOYW1lIjoiU3RldmUgU21pdGgiLCJpYXQiOjE3NzE5OTUzMjUsImV4cCI6MTc3MjA4MTcyNX0.SvKqZiT3TjKMqrDNkvlLzYTvhLdZ5kfdtH43DGDYR18"
    },
    body: JSON.stringify({ planType: "Pro" })
  });

  const data = await res.json();

  const options = {
    key: data.data.key,
    amount: data.data.order.amount,
    currency: "INR",
    order_id: data.data.order.id,

    handler: async function (response) {
      const verifyRes = await fetch("http://localhost:5000/api/v1/payments/verifyPayment", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2OTk2YWMxYzdmOWQ4MTM3YTQwNTIyOGUiLCJlbWFpbCI6InN0ZXZlZ29hdEA0OSIsInVzZXJOYW1lIjoic3RldmVzbWl0aCIsImZ1bGxOYW1lIjoiU3RldmUgU21pdGgiLCJpYXQiOjE3NzE5OTUzMjUsImV4cCI6MTc3MjA4MTcyNX0.SvKqZiT3TjKMqrDNkvlLzYTvhLdZ5kfdtH43DGDYR18"
        },
        body: JSON.stringify(response)
      });
      const verifyData = await verifyRes.json();
      if (verifyRes.ok) {
        alert("Payment successful!");
      } else {
        alert("Payment verification failed: " + verifyData.message);
      }
    }
  };

  new Razorpay(options).open();
}
  </script>
</body>
</html>